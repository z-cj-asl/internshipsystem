{"ast":null,"code":"var Pool = require('./Pool');\n\nvar PoolConfig = require('./PoolConfig');\n\nvar PoolNamespace = require('./PoolNamespace');\n\nvar PoolSelector = require('./PoolSelector');\n\nvar Util = require('util');\n\nvar EventEmitter = require('events').EventEmitter;\n\nmodule.exports = PoolCluster;\n/**\n * PoolCluster\n * @constructor\n * @param {object} [config] The pool cluster configuration\n * @public\n */\n\nfunction PoolCluster(config) {\n  EventEmitter.call(this);\n  config = config || {};\n  this._canRetry = typeof config.canRetry === 'undefined' ? true : config.canRetry;\n  this._defaultSelector = config.defaultSelector || 'RR';\n  this._removeNodeErrorCount = config.removeNodeErrorCount || 5;\n  this._restoreNodeTimeout = config.restoreNodeTimeout || 0;\n  this._closed = false;\n  this._findCaches = Object.create(null);\n  this._lastId = 0;\n  this._namespaces = Object.create(null);\n  this._nodes = Object.create(null);\n}\n\nUtil.inherits(PoolCluster, EventEmitter);\n\nPoolCluster.prototype.add = function add(id, config) {\n  if (this._closed) {\n    throw new Error('PoolCluster is closed.');\n  }\n\n  var nodeId = typeof id === 'object' ? 'CLUSTER::' + ++this._lastId : String(id);\n\n  if (this._nodes[nodeId] !== undefined) {\n    throw new Error('Node ID \"' + nodeId + '\" is already defined in PoolCluster.');\n  }\n\n  var poolConfig = typeof id !== 'object' ? new PoolConfig(config) : new PoolConfig(id);\n  this._nodes[nodeId] = {\n    id: nodeId,\n    errorCount: 0,\n    pool: new Pool({\n      config: poolConfig\n    }),\n    _offlineUntil: 0\n  };\n\n  this._clearFindCaches();\n};\n\nPoolCluster.prototype.end = function end(callback) {\n  var cb = callback !== undefined ? callback : _cb;\n\n  if (typeof cb !== 'function') {\n    throw TypeError('callback argument must be a function');\n  }\n\n  if (this._closed) {\n    process.nextTick(cb);\n    return;\n  }\n\n  this._closed = true;\n  var calledBack = false;\n  var nodeIds = Object.keys(this._nodes);\n  var waitingClose = 0;\n\n  function onEnd(err) {\n    if (!calledBack && (err || --waitingClose <= 0)) {\n      calledBack = true;\n      cb(err);\n    }\n  }\n\n  for (var i = 0; i < nodeIds.length; i++) {\n    var nodeId = nodeIds[i];\n    var node = this._nodes[nodeId];\n    waitingClose++;\n    node.pool.end(onEnd);\n  }\n\n  if (waitingClose === 0) {\n    process.nextTick(onEnd);\n  }\n};\n\nPoolCluster.prototype.of = function (pattern, selector) {\n  pattern = pattern || '*';\n  selector = selector || this._defaultSelector;\n  selector = selector.toUpperCase();\n\n  if (typeof PoolSelector[selector] === 'undefined') {\n    selector = this._defaultSelector;\n  }\n\n  var key = pattern + selector;\n\n  if (typeof this._namespaces[key] === 'undefined') {\n    this._namespaces[key] = new PoolNamespace(this, pattern, selector);\n  }\n\n  return this._namespaces[key];\n};\n\nPoolCluster.prototype.remove = function remove(pattern) {\n  var foundNodeIds = this._findNodeIds(pattern, true);\n\n  for (var i = 0; i < foundNodeIds.length; i++) {\n    var node = this._getNode(foundNodeIds[i]);\n\n    if (node) {\n      this._removeNode(node);\n    }\n  }\n};\n\nPoolCluster.prototype.getConnection = function (pattern, selector, cb) {\n  var namespace;\n\n  if (typeof pattern === 'function') {\n    cb = pattern;\n    namespace = this.of();\n  } else {\n    if (typeof selector === 'function') {\n      cb = selector;\n      selector = this._defaultSelector;\n    }\n\n    namespace = this.of(pattern, selector);\n  }\n\n  namespace.getConnection(cb);\n};\n\nPoolCluster.prototype._clearFindCaches = function _clearFindCaches() {\n  this._findCaches = Object.create(null);\n};\n\nPoolCluster.prototype._decreaseErrorCount = function _decreaseErrorCount(node) {\n  var errorCount = node.errorCount;\n\n  if (errorCount > this._removeNodeErrorCount) {\n    errorCount = this._removeNodeErrorCount;\n  }\n\n  if (errorCount < 1) {\n    errorCount = 1;\n  }\n\n  node.errorCount = errorCount - 1;\n\n  if (node._offlineUntil) {\n    node._offlineUntil = 0;\n    this.emit('online', node.id);\n  }\n};\n\nPoolCluster.prototype._findNodeIds = function _findNodeIds(pattern, includeOffline) {\n  var currentTime = 0;\n  var foundNodeIds = this._findCaches[pattern];\n\n  if (foundNodeIds === undefined) {\n    var expression = patternRegExp(pattern);\n    var nodeIds = Object.keys(this._nodes);\n    foundNodeIds = nodeIds.filter(function (id) {\n      return id.match(expression);\n    });\n    this._findCaches[pattern] = foundNodeIds;\n  }\n\n  if (includeOffline) {\n    return foundNodeIds;\n  }\n\n  return foundNodeIds.filter(function (nodeId) {\n    var node = this._getNode(nodeId);\n\n    if (!node._offlineUntil) {\n      return true;\n    }\n\n    if (!currentTime) {\n      currentTime = getMonotonicMilliseconds();\n    }\n\n    return node._offlineUntil <= currentTime;\n  }, this);\n};\n\nPoolCluster.prototype._getNode = function _getNode(id) {\n  return this._nodes[id] || null;\n};\n\nPoolCluster.prototype._increaseErrorCount = function _increaseErrorCount(node) {\n  var errorCount = ++node.errorCount;\n\n  if (this._removeNodeErrorCount > errorCount) {\n    return;\n  }\n\n  if (this._restoreNodeTimeout > 0) {\n    node._offlineUntil = getMonotonicMilliseconds() + this._restoreNodeTimeout;\n    this.emit('offline', node.id);\n    return;\n  }\n\n  this._removeNode(node);\n\n  this.emit('remove', node.id);\n};\n\nPoolCluster.prototype._getConnection = function (node, cb) {\n  var self = this;\n  node.pool.getConnection(function (err, connection) {\n    if (err) {\n      self._increaseErrorCount(node);\n\n      cb(err);\n      return;\n    } else {\n      self._decreaseErrorCount(node);\n    }\n\n    connection._clusterId = node.id;\n    cb(null, connection);\n  });\n};\n\nPoolCluster.prototype._removeNode = function _removeNode(node) {\n  delete this._nodes[node.id];\n\n  this._clearFindCaches();\n\n  node.pool.end(_noop);\n};\n\nfunction getMonotonicMilliseconds() {\n  var ms;\n\n  if (typeof process.hrtime === 'function') {\n    ms = process.hrtime();\n    ms = ms[0] * 1e3 + ms[1] * 1e-6;\n  } else {\n    ms = process.uptime() * 1000;\n  }\n\n  return Math.floor(ms);\n}\n\nfunction isRegExp(val) {\n  return typeof val === 'object' && Object.prototype.toString.call(val) === '[object RegExp]';\n}\n\nfunction patternRegExp(pattern) {\n  if (isRegExp(pattern)) {\n    return pattern;\n  }\n\n  var source = pattern.replace(/([.+?^=!:${}()|\\[\\]\\/\\\\])/g, '\\\\$1').replace(/\\*/g, '.*');\n  return new RegExp('^' + source + '$');\n}\n\nfunction _cb(err) {\n  if (err) {\n    throw err;\n  }\n}\n\nfunction _noop() {}","map":{"version":3,"names":["Pool","require","PoolConfig","PoolNamespace","PoolSelector","Util","EventEmitter","module","exports","PoolCluster","config","call","_canRetry","canRetry","_defaultSelector","defaultSelector","_removeNodeErrorCount","removeNodeErrorCount","_restoreNodeTimeout","restoreNodeTimeout","_closed","_findCaches","Object","create","_lastId","_namespaces","_nodes","inherits","prototype","add","id","Error","nodeId","String","undefined","poolConfig","errorCount","pool","_offlineUntil","_clearFindCaches","end","callback","cb","_cb","TypeError","process","nextTick","calledBack","nodeIds","keys","waitingClose","onEnd","err","i","length","node","of","pattern","selector","toUpperCase","key","remove","foundNodeIds","_findNodeIds","_getNode","_removeNode","getConnection","namespace","_decreaseErrorCount","emit","includeOffline","currentTime","expression","patternRegExp","filter","match","getMonotonicMilliseconds","_increaseErrorCount","_getConnection","self","connection","_clusterId","_noop","ms","hrtime","uptime","Math","floor","isRegExp","val","toString","source","replace","RegExp"],"sources":["C:/Users/ZCJ/Desktop/internshipsysrem/node_modules/mysql/lib/PoolCluster.js"],"sourcesContent":["var Pool          = require('./Pool');\nvar PoolConfig    = require('./PoolConfig');\nvar PoolNamespace = require('./PoolNamespace');\nvar PoolSelector  = require('./PoolSelector');\nvar Util          = require('util');\nvar EventEmitter  = require('events').EventEmitter;\n\nmodule.exports = PoolCluster;\n\n/**\n * PoolCluster\n * @constructor\n * @param {object} [config] The pool cluster configuration\n * @public\n */\nfunction PoolCluster(config) {\n  EventEmitter.call(this);\n\n  config = config || {};\n  this._canRetry = typeof config.canRetry === 'undefined' ? true : config.canRetry;\n  this._defaultSelector = config.defaultSelector || 'RR';\n  this._removeNodeErrorCount = config.removeNodeErrorCount || 5;\n  this._restoreNodeTimeout = config.restoreNodeTimeout || 0;\n\n  this._closed = false;\n  this._findCaches = Object.create(null);\n  this._lastId = 0;\n  this._namespaces = Object.create(null);\n  this._nodes = Object.create(null);\n}\n\nUtil.inherits(PoolCluster, EventEmitter);\n\nPoolCluster.prototype.add = function add(id, config) {\n  if (this._closed) {\n    throw new Error('PoolCluster is closed.');\n  }\n\n  var nodeId = typeof id === 'object'\n    ? 'CLUSTER::' + (++this._lastId)\n    : String(id);\n\n  if (this._nodes[nodeId] !== undefined) {\n    throw new Error('Node ID \"' + nodeId + '\" is already defined in PoolCluster.');\n  }\n\n  var poolConfig = typeof id !== 'object'\n    ? new PoolConfig(config)\n    : new PoolConfig(id);\n\n  this._nodes[nodeId] = {\n    id            : nodeId,\n    errorCount    : 0,\n    pool          : new Pool({config: poolConfig}),\n    _offlineUntil : 0\n  };\n\n  this._clearFindCaches();\n};\n\nPoolCluster.prototype.end = function end(callback) {\n  var cb = callback !== undefined\n    ? callback\n    : _cb;\n\n  if (typeof cb !== 'function') {\n    throw TypeError('callback argument must be a function');\n  }\n\n  if (this._closed) {\n    process.nextTick(cb);\n    return;\n  }\n\n  this._closed = true;\n\n  var calledBack   = false;\n  var nodeIds      = Object.keys(this._nodes);\n  var waitingClose = 0;\n\n  function onEnd(err) {\n    if (!calledBack && (err || --waitingClose <= 0)) {\n      calledBack = true;\n      cb(err);\n    }\n  }\n\n  for (var i = 0; i < nodeIds.length; i++) {\n    var nodeId = nodeIds[i];\n    var node = this._nodes[nodeId];\n\n    waitingClose++;\n    node.pool.end(onEnd);\n  }\n\n  if (waitingClose === 0) {\n    process.nextTick(onEnd);\n  }\n};\n\nPoolCluster.prototype.of = function(pattern, selector) {\n  pattern = pattern || '*';\n\n  selector = selector || this._defaultSelector;\n  selector = selector.toUpperCase();\n  if (typeof PoolSelector[selector] === 'undefined') {\n    selector = this._defaultSelector;\n  }\n\n  var key = pattern + selector;\n\n  if (typeof this._namespaces[key] === 'undefined') {\n    this._namespaces[key] = new PoolNamespace(this, pattern, selector);\n  }\n\n  return this._namespaces[key];\n};\n\nPoolCluster.prototype.remove = function remove(pattern) {\n  var foundNodeIds = this._findNodeIds(pattern, true);\n\n  for (var i = 0; i < foundNodeIds.length; i++) {\n    var node = this._getNode(foundNodeIds[i]);\n\n    if (node) {\n      this._removeNode(node);\n    }\n  }\n};\n\nPoolCluster.prototype.getConnection = function(pattern, selector, cb) {\n  var namespace;\n  if (typeof pattern === 'function') {\n    cb = pattern;\n    namespace = this.of();\n  } else {\n    if (typeof selector === 'function') {\n      cb = selector;\n      selector = this._defaultSelector;\n    }\n\n    namespace = this.of(pattern, selector);\n  }\n\n  namespace.getConnection(cb);\n};\n\nPoolCluster.prototype._clearFindCaches = function _clearFindCaches() {\n  this._findCaches = Object.create(null);\n};\n\nPoolCluster.prototype._decreaseErrorCount = function _decreaseErrorCount(node) {\n  var errorCount = node.errorCount;\n\n  if (errorCount > this._removeNodeErrorCount) {\n    errorCount = this._removeNodeErrorCount;\n  }\n\n  if (errorCount < 1) {\n    errorCount = 1;\n  }\n\n  node.errorCount = errorCount - 1;\n\n  if (node._offlineUntil) {\n    node._offlineUntil = 0;\n    this.emit('online', node.id);\n  }\n};\n\nPoolCluster.prototype._findNodeIds = function _findNodeIds(pattern, includeOffline) {\n  var currentTime  = 0;\n  var foundNodeIds = this._findCaches[pattern];\n\n  if (foundNodeIds === undefined) {\n    var expression = patternRegExp(pattern);\n    var nodeIds    = Object.keys(this._nodes);\n\n    foundNodeIds = nodeIds.filter(function (id) {\n      return id.match(expression);\n    });\n\n    this._findCaches[pattern] = foundNodeIds;\n  }\n\n  if (includeOffline) {\n    return foundNodeIds;\n  }\n\n  return foundNodeIds.filter(function (nodeId) {\n    var node = this._getNode(nodeId);\n\n    if (!node._offlineUntil) {\n      return true;\n    }\n\n    if (!currentTime) {\n      currentTime = getMonotonicMilliseconds();\n    }\n\n    return node._offlineUntil <= currentTime;\n  }, this);\n};\n\nPoolCluster.prototype._getNode = function _getNode(id) {\n  return this._nodes[id] || null;\n};\n\nPoolCluster.prototype._increaseErrorCount = function _increaseErrorCount(node) {\n  var errorCount = ++node.errorCount;\n\n  if (this._removeNodeErrorCount > errorCount) {\n    return;\n  }\n\n  if (this._restoreNodeTimeout > 0) {\n    node._offlineUntil = getMonotonicMilliseconds() + this._restoreNodeTimeout;\n    this.emit('offline', node.id);\n    return;\n  }\n\n  this._removeNode(node);\n  this.emit('remove', node.id);\n};\n\nPoolCluster.prototype._getConnection = function(node, cb) {\n  var self = this;\n\n  node.pool.getConnection(function (err, connection) {\n    if (err) {\n      self._increaseErrorCount(node);\n      cb(err);\n      return;\n    } else {\n      self._decreaseErrorCount(node);\n    }\n\n    connection._clusterId = node.id;\n\n    cb(null, connection);\n  });\n};\n\nPoolCluster.prototype._removeNode = function _removeNode(node) {\n  delete this._nodes[node.id];\n\n  this._clearFindCaches();\n\n  node.pool.end(_noop);\n};\n\nfunction getMonotonicMilliseconds() {\n  var ms;\n\n  if (typeof process.hrtime === 'function') {\n    ms = process.hrtime();\n    ms = ms[0] * 1e3 + ms[1] * 1e-6;\n  } else {\n    ms = process.uptime() * 1000;\n  }\n\n  return Math.floor(ms);\n}\n\nfunction isRegExp(val) {\n  return typeof val === 'object'\n    && Object.prototype.toString.call(val) === '[object RegExp]';\n}\n\nfunction patternRegExp(pattern) {\n  if (isRegExp(pattern)) {\n    return pattern;\n  }\n\n  var source = pattern\n    .replace(/([.+?^=!:${}()|\\[\\]\\/\\\\])/g, '\\\\$1')\n    .replace(/\\*/g, '.*');\n\n  return new RegExp('^' + source + '$');\n}\n\nfunction _cb(err) {\n  if (err) {\n    throw err;\n  }\n}\n\nfunction _noop() {}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}