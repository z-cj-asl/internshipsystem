{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ZCJ\\\\Desktop\\\\internshipsysrem\\\\src\\\\components\\\\Topic\\\\Topic.js\";\nimport React, { Component } from 'react';\nimport Discusstion from '../Discusstion/Discusstion';\nimport moment from 'moment';\nimport style from './Topic.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Topic extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      topicdata: {},\n      discuss: ''\n    };\n\n    this.setDiscuss = e => {\n      this.setState({\n        discuss: e.target.value\n      });\n    };\n\n    this.topicnameTOtopicdata = () => {\n      fetch('/topicnameToTopicdata', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          topicname: this.props.topicmember.topicname\n        })\n      }).then(response => response.json()).then(data => {\n        this.setState({\n          topicdata: data[0]\n        });\n        console.log(data);\n      });\n    };\n\n    this.discussRelease = () => {\n      if (!this.state.discuss) {\n        window.alert('输入框为空');\n      } else {\n        let msgtime = moment().format('YYYY-MM-DD HH:mm dddd');\n        console.log(msgtime);\n        fetch('/discussrelease', {\n          method: 'post',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            topicname: this.state.topicdata.topicname,\n            username: this.props.userdata.username,\n            msg: this.state.discuss,\n            msgtime: msgtime\n          })\n        }).then(response => response.json()).then(data => {\n          this.setState({\n            topiclist: data\n          });\n          console.log(data);\n        });\n      }\n    };\n\n    this.topicnameTOtopicdata();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.closebutton,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.props.setPage,\n          children: \"\\u5173\\u95ED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 46\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.topicpage,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: style.topicleft,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: style.topicinfor,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: style.topictitle,\n              children: this.state.topicdata.topicname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: style.lineintroducion,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: style.topicline,\n                children: \"\\u7B80\\u4ECB\\uFF1A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: style.introduction,\n                children: this.state.topicdata.introduction\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: style.topicright,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: style.disscuss,\n            children: [\"\\u8BA8\\u8BBA\", /*#__PURE__*/_jsxDEV(Discusstion, {\n              userdata: this.props.userdata,\n              topicdata: this.state.topicdata\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: style.sendmsg,\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: style.input,\n              onChange: this.setDiscuss\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: this.discussRelease,\n              children: \"\\u53D1\\u9001\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"names":["React","Component","Discusstion","moment","style","Topic","constructor","props","state","topicdata","discuss","setDiscuss","e","setState","target","value","topicnameTOtopicdata","fetch","method","headers","body","JSON","stringify","topicname","topicmember","then","response","json","data","console","log","discussRelease","window","alert","msgtime","format","username","userdata","msg","topiclist","render","closebutton","setPage","topicpage","topicleft","topicinfor","topictitle","lineintroducion","topicline","introduction","topicright","disscuss","sendmsg","input"],"sources":["C:/Users/ZCJ/Desktop/internshipsysrem/src/components/Topic/Topic.js"],"sourcesContent":["import React, { Component } from 'react'\r\nimport Discusstion from '../Discusstion/Discusstion'\r\nimport moment from 'moment'\r\nimport style from './Topic.module.css'\r\n\r\nexport default class Topic extends Component {\r\n  state = {\r\n    topicdata:{},\r\n    discuss:''\r\n  }\r\n\r\n  constructor(props){\r\n    super(props)\r\n    this.topicnameTOtopicdata()\r\n  }\r\n\r\n  setDiscuss = (e) =>{\r\n    this.setState({\r\n      discuss: e.target.value\r\n    })\r\n  }\r\n\r\n  topicnameTOtopicdata = () =>{\r\n    fetch('/topicnameToTopicdata',{\r\n      method: 'post',\r\n      headers:{'Content-Type':'application/json'},\r\n      body:JSON.stringify({\r\n        topicname: this.props.topicmember.topicname\r\n      })\r\n      }).then(response =>response.json()).then(data =>{\r\n        this.setState({\r\n          topicdata: data[0]\r\n        })\r\n      console.log(data)\r\n      })\r\n  }\r\n\r\n  discussRelease = () =>{\r\n    if(!this.state.discuss){\r\n      window.alert('输入框为空')\r\n    }\r\n    else{\r\n      let msgtime = moment().format('YYYY-MM-DD HH:mm dddd')\r\n      console.log(msgtime)\r\n      fetch('/discussrelease',{\r\n      method: 'post',\r\n      headers:{'Content-Type':'application/json'},\r\n      body:JSON.stringify({\r\n        topicname:this.state.topicdata.topicname,\r\n        username: this.props.userdata.username,\r\n        msg: this.state.discuss,\r\n        msgtime: msgtime\r\n      })\r\n      }).then(response =>response.json()).then(data =>{\r\n          this.setState({\r\n            topiclist:data\r\n          })\r\n          console.log(data)\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className = {style.closebutton}><button onClick ={this.props.setPage}>关闭</button></div>\r\n        <div className ={style.topicpage}>\r\n            <div className = {style.topicleft}>\r\n                <div className = {style.topicinfor}>\r\n                  <div className = {style.topictitle}>{this.state.topicdata.topicname}</div>\r\n                  <div className ={style.lineintroducion}>\r\n                    <div className = {style.topicline}>简介：</div>\r\n                    <div className = {style.introduction}>{this.state.topicdata.introduction}</div>\r\n                  </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className = {style.topicright}>\r\n              <div className ={style.disscuss}>\r\n                    讨论\r\n                    <Discusstion userdata = {this.props.userdata} topicdata ={this.state.topicdata}/>\r\n              </div>\r\n                <div className = {style.sendmsg}>\r\n                    <input className ={style.input} onChange = {this.setDiscuss}></input>\r\n                    <button onClick = {this.discussRelease}>发送</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}