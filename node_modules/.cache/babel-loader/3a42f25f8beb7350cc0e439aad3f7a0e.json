{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ZCJ\\\\Desktop\\\\internshipsysrem\\\\src\\\\components\\\\TopicList\\\\TopicList.js\";\nimport React, { Component } from 'react';\nimport TopicApply from '../TopicApply/TopicApply';\nimport style from './TopicList.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class TopicList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      topiclist: [],\n      topicapply: false,\n      applydata: {}\n    };\n\n    this.setApplydata = item => {\n      return () => {\n        this.setState({\n          applydata: item,\n          topicapply: true\n        });\n      };\n    };\n\n    this.closeApply = () => {\n      this.setState({\n        topicapply: false\n      });\n    };\n\n    this.obtainTopiclist = () => {\n      fetch('/obtaintopiclist', {\n        method: 'post',\n        header: {\n          'Content-Type': 'application/json'\n        },\n        body: {}\n      }).then(response => response.json()).then(data => {\n        this.setState({\n          topiclist: data\n        });\n        console.log(data);\n      });\n    };\n\n    this.findcreator = () => {\n      fetch('/findcreator', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          topicname: this.props.topicdata.topicname\n        })\n      }).then(response => response.json()).then(data => {\n        console.log(data);\n        return data.username;\n      });\n    };\n\n    this.closeApply = this.closeApply.bind(this);\n  }\n\n  componentDidMount() {\n    this.obtainTopiclist();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.listtitle,\n        children: \"\\u53D1\\u5E03\\u7684\\u8BFE\\u9898\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.topiclist,\n        children: this.state.topiclist.map(item => {\n          console.log(item.toString());\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: style.sigletopic,\n            onClick: this.setApplydata(item),\n            children: [item.topicname, \" \"]\n          }, item.topicname, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 23\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), this.state.topicapply ? /*#__PURE__*/_jsxDEV(TopicApply, {\n        topicdata: this.state.applydata,\n        closeApply: this.closeApply,\n        username: this.props.username,\n        creator: this.findcreator()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this) : '']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"names":["React","Component","TopicApply","style","TopicList","constructor","props","state","topiclist","topicapply","applydata","setApplydata","item","setState","closeApply","obtainTopiclist","fetch","method","header","body","then","response","json","data","console","log","findcreator","headers","JSON","stringify","topicname","topicdata","username","bind","componentDidMount","render","listtitle","map","toString","sigletopic"],"sources":["C:/Users/ZCJ/Desktop/internshipsysrem/src/components/TopicList/TopicList.js"],"sourcesContent":["import React, { Component } from 'react'\r\nimport TopicApply from '../TopicApply/TopicApply'\r\nimport style from './TopicList.module.css'\r\nexport default class TopicList extends Component {\r\n  state = {\r\n    topiclist:[],\r\n    topicapply:false,\r\n    applydata:{}\r\n  }\r\n\r\n  constructor(props){\r\n    super(props)\r\n    this.closeApply = this.closeApply.bind(this)\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.obtainTopiclist()\r\n  }\r\n\r\n  setApplydata = (item) =>{\r\n    return () => {\r\n        this.setState({\r\n          applydata:item,\r\n          topicapply: true \r\n        })\r\n    }\r\n  }\r\n\r\n  closeApply = () =>{\r\n    this.setState({\r\n      topicapply: false\r\n    })\r\n  }\r\n\r\n  obtainTopiclist = () =>{\r\n    fetch('/obtaintopiclist',{\r\n      method: 'post',\r\n      header:{'Content-Type':'application/json'},\r\n      body:{}\r\n    }).then(response =>response.json()).then(data =>{\r\n      this.setState({\r\n        topiclist:data\r\n      })\r\n      console.log(data)\r\n    })\r\n  }\r\n\r\n  findcreator = () =>{\r\n    fetch('/findcreator',{\r\n        method: 'post',\r\n        headers:{'Content-Type':'application/json'},\r\n        body:JSON.stringify({\r\n             topicname: this.props.topicdata.topicname\r\n        })\r\n    }).then(response =>response.json()).then(data =>{\r\n        console.log(data)\r\n        return data.username\r\n    })\r\n}\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className ={style.listtitle}>发布的课题</div>\r\n        <div className ={style.topiclist}>\r\n          {\r\n          this.state.topiclist.map((item) => {\r\n            console.log(item.toString())\r\n              return (<div key = {item.topicname} className ={style.sigletopic} onClick = {this.setApplydata(item)}>\r\n                      {item.topicname} </div>)\r\n          })\r\n          }\r\n        </div>\r\n\r\n        {\r\n          this.state.topicapply ?\r\n          <TopicApply topicdata = {this.state.applydata} closeApply = {this.closeApply} username = {this.props.username} creator = {this.findcreator()}/>\r\n          :''\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}